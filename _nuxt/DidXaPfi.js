import{I as P,z as w,O as R,J as T,P as I,Q as b,n as D,R as E,S as M,G as O,U as g,V as N,k as V,W as A,X as j,Y as B,Z as U}from"./DFJ_glw2.js";function F(e){return I()?(b(e),!0):!1}function S(e){return typeof e=="function"?e():P(e)}const x=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function q(e,a=1e3,t={}){const{immediate:u=!0,immediateCallback:n=!1}=t;let s=null;const f=w(!1);function c(){s&&(clearInterval(s),s=null)}function v(){f.value=!1,c()}function d(){const y=S(a);y<=0||(f.value=!0,n&&e(),c(),f.value&&(s=setInterval(e,y)))}if(u&&x&&d(),R(a)||typeof a=="function"){const y=T(a,()=>{f.value&&x&&d()});F(y)}return F(v),{isActive:f,pause:v,resume:d}}const L=x?window:void 0;function ee(e){var a;const t=S(e);return(a=t==null?void 0:t.$el)!=null?a:t}function W(e,a={}){const{immediate:t=!0,fpsLimit:u=void 0,window:n=L}=a,s=w(!1),f=D(()=>u?1e3/E(u):null);let c=0,v=null;function d(h){if(!s.value||!n)return;c||(c=h);const p=h-c;if(f.value&&p<f.value){v=n.requestAnimationFrame(d);return}c=h,e({delta:p,timestamp:h}),v=n.requestAnimationFrame(d)}function y(){!s.value&&n&&(s.value=!0,c=0,v=n.requestAnimationFrame(d))}function o(){s.value=!1,v!=null&&n&&(n.cancelAnimationFrame(v),v=null)}return t&&y(),F(o),{isActive:M(s),pause:o,resume:y}}function z(e={}){const{controls:a=!1,interval:t="requestAnimationFrame"}=e,u=w(new Date),n=()=>u.value=new Date,s=t==="requestAnimationFrame"?W(n,{immediate:!0}):q(n,t,{immediate:!0});return a?{now:u,...s}:u}const G=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:Number.POSITIVE_INFINITY,value:31536e6,name:"year"}],H={justNow:"just now",past:e=>e.match(/\d/)?`${e} ago`:e,future:e=>e.match(/\d/)?`in ${e}`:e,month:(e,a)=>e===1?a?"last month":"next month":`${e} month${e>1?"s":""}`,year:(e,a)=>e===1?a?"last year":"next year":`${e} year${e>1?"s":""}`,day:(e,a)=>e===1?a?"yesterday":"tomorrow":`${e} day${e>1?"s":""}`,week:(e,a)=>e===1?a?"last week":"next week":`${e} week${e>1?"s":""}`,hour:e=>`${e} hour${e>1?"s":""}`,minute:e=>`${e} minute${e>1?"s":""}`,second:e=>`${e} second${e>1?"s":""}`,invalid:""};function k(e){return e.toISOString().slice(0,10)}function K(e,a={}){const{controls:t=!1,updateInterval:u=3e4}=a,{now:n,...s}=z({interval:u,controls:!0}),f=D(()=>Y(new Date(S(e)),a,S(n)));return t?{timeAgo:f,...s}:f}function Y(e,a={},t=Date.now()){var u;const{max:n,messages:s=H,fullDateFormatter:f=k,units:c=G,showSecond:v=!1,rounding:d="round"}=a,y=typeof d=="number"?r=>+r.toFixed(d):Math[d],o=+t-+e,h=Math.abs(o);function p(r,l){return y(Math.abs(r)/l.value)}function _(r,l){const m=p(r,l),i=r>0,C=$(l.name,m,i);return $(i?"past":"future",C,i)}function $(r,l,m){const i=s[r];return typeof i=="function"?i(l,m):i.replace("{0}",l.toString())}if(h<6e4&&!v)return s.justNow;if(typeof n=="number"&&h>n)return f(new Date(e));if(typeof n=="string"){const r=(u=c.find(l=>l.name===n))==null?void 0:u.max;if(r&&h>r)return f(new Date(e))}for(const[r,l]of c.entries()){if(p(o,l)<=0&&c[r-1])return _(o,c[r-1]);if(h<l.max)return _(o,l)}return s.invalid}const J=e=>e==="defer"||e===!1;function ae(...e){var $;const a=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(a);let[t,u,n={}]=e;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof u!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const s=O(),f=u,c=()=>g.value,v=()=>s.isHydrating?s.payload.data[t]:s.static.data[t];n.server=n.server??!0,n.default=n.default??c,n.getCachedData=n.getCachedData??v,n.lazy=n.lazy??!1,n.immediate=n.immediate??!0,n.deep=n.deep??g.deep,n.dedupe=n.dedupe??"cancel";const d=n.getCachedData(t,s),y=d!=null;if(!s._asyncData[t]||!n.immediate){($=s.payload._errors)[t]??($[t]=g.errorValue);const r=n.deep?w:N;s._asyncData[t]={data:r(y?d:n.default()),pending:w(!y),error:V(s.payload._errors,t),status:w("idle"),_default:n.default}}const o={...s._asyncData[t]};delete o._default,o.refresh=o.execute=(r={})=>{if(s._asyncDataPromises[t]){if(J(r.dedupe??n.dedupe))return s._asyncDataPromises[t];s._asyncDataPromises[t].cancelled=!0}if(r._initial||s.isHydrating&&r._initial!==!1){const m=r._initial?d:n.getCachedData(t,s);if(m!=null)return Promise.resolve(m)}o.pending.value=!0,o.status.value="pending";const l=new Promise((m,i)=>{try{m(f(s))}catch(C){i(C)}}).then(async m=>{if(l.cancelled)return s._asyncDataPromises[t];let i=m;n.transform&&(i=await n.transform(m)),n.pick&&(i=X(i,n.pick)),s.payload.data[t]=i,o.data.value=i,o.error.value=g.errorValue,o.status.value="success"}).catch(m=>{if(l.cancelled)return s._asyncDataPromises[t];o.error.value=B(m),o.data.value=P(n.default()),o.status.value="error"}).finally(()=>{l.cancelled||(o.pending.value=!1,delete s._asyncDataPromises[t])});return s._asyncDataPromises[t]=l,s._asyncDataPromises[t]},o.clear=()=>Q(s,t);const h=()=>o.refresh({_initial:!0}),p=n.server!==!1&&s.payload.serverRendered;{const r=U();if(r&&p&&n.immediate&&!r.sp&&(r.sp=[]),r&&!r._nuxtOnBeforeMountCbs){r._nuxtOnBeforeMountCbs=[];const i=r._nuxtOnBeforeMountCbs;A(()=>{i.forEach(C=>{C()}),i.splice(0,i.length)}),j(()=>i.splice(0,i.length))}p&&s.isHydrating&&(o.error.value||d!=null)?(o.pending.value=!1,o.status.value=o.error.value?"error":"success"):r&&(s.payload.serverRendered&&s.isHydrating||n.lazy)&&n.immediate?r._nuxtOnBeforeMountCbs.push(h):n.immediate&&h();const l=I();if(n.watch){const i=T(n.watch,()=>o.refresh());l&&b(i)}const m=s.hook("app:data:refresh",async i=>{(!i||i.includes(t))&&await o.refresh()});l&&b(m)}const _=Promise.resolve(s._asyncDataPromises[t]).then(()=>o);return Object.assign(_,o),_}function Q(e,a){a in e.payload.data&&(e.payload.data[a]=void 0),a in e.payload._errors&&(e.payload._errors[a]=g.errorValue),e._asyncData[a]&&(e._asyncData[a].data.value=void 0,e._asyncData[a].error.value=g.errorValue,e._asyncData[a].pending.value=!1,e._asyncData[a].status.value="idle"),a in e._asyncDataPromises&&(e._asyncDataPromises[a]&&(e._asyncDataPromises[a].cancelled=!0),e._asyncDataPromises[a]=void 0)}function X(e,a){const t={};for(const u of a)t[u]=e[u];return t}function te(e){const u=D(()=>e.split(/\s+/).length),n=D(()=>e.replace(/[^\x00-\xff]/g,"xx").length),s=D(()=>/[\u4e00-\u9fa5]/.test(e)?"chinese":"english");return D(()=>{let c=0;return s.value==="chinese"?c=n.value/300:c=u.value/200,Math.ceil(c)+" 分钟"})}const ne=e=>K(new Date(e),{messages:{invalid:"无效的日期",justNow:"刚刚",past:a=>`${a}`,future:a=>`${a}`,month:(a,t)=>a===1?t?"上个月":"下个月":`${a} 个月前`,year:(a,t)=>a===1?t?"去年":"明年":`${a} 年前`,day:(a,t)=>a===1?t?"昨天":"明天":`${a} 天前`,week:(a,t)=>a===1?t?"上周":"下周":`${a} 周前`,hour:(a,t)=>a===1?t?"一小时前":"一小时":`${a} 小时前`,minute:(a,t)=>a===1?t?"一分钟前":"一分钟":`${a} 分钟前`,second:(a,t)=>a===1?t?"一秒钟前":"一秒":`${a} 秒钟前`}});export{ae as a,te as b,ne as c,ee as u};
